#!/bin/bash

set -eu

# bls12_377, bls12_381, bn128, bw6_761
CURVE=bls12_381

# compile
zokrates compile -i record_vote.zok -c $CURVE --debug

# perform the setup phase
zokrates setup

PASSPHRASE="585130764 3462125032 1377388145 4270650837 4026310012 4202261971 1588054924 1001676151 2476478525 1629836966 3852127332 3333573432 74438281 744295870 79883847 1793178285"

VOTE="1"

MEMBER_ONE_PHRASE_HASH="2825677457 449309676 2341959216 195517256 1672978011 1442553708 3687404851 2247550367"
MEMBER_TWO_PHRASE_HASH="1767626566 739584696 404276562 3490204557 709932590 2373092679 167493394 3921202498"
MEMBER_PHRASES="$MEMBER_ONE_PHRASE_HASH $MEMBER_TWO_PHRASE_HASH"

zokrates compute-witness -a $PASSPHRASE $MEMBER_PHRASES

# generate a proof of computation
zokrates generate-proof

# or verify natively
zokrates verify